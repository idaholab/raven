<?xml version="1.0" ?>
<Simulation>
  <TestInfo>
    <author>rouxpn</author>
    <created>2017-07-20</created>
    <description>
       An example of using the PHISICS code interface. 
    </description>
    <revisions>
      <revision author="rouxpn" date="2017-11-06">phisics test case</revision>
    </revisions>
  </TestInfo>
  <RunInfo>
    <WorkingDir>./</WorkingDir>
    <Sequence>testDummyStep,extract_data</Sequence>
    <mode>mpi</mode>
    <batchSize>4</batchSize>
    <NumThreads>4</NumThreads>
    <NumMPI>4</NumMPI>
  </RunInfo>

  <Files>
    <Input name="decay.dat"           type="decay"             perturbable="True"   subDirectory="library_fiss" >decay.dat</Input>
    <Input name="inp.xml"             type="inp"               perturbable="False"                              >inp.xml</Input>
    <Input name="lib_inp_path.xml"    type="path"              perturbable="False"                              >lib_inp_path.xml</Input>
    <Input name="Material.xml"        type="Material"          perturbable="True"                               >Material.xml</Input>
    <Input name="Depletion_input.xml" type="Depletion_input"   perturbable="False"                              >Depletion_input.xml</Input>
    <Input name="Xs-Library.xml"      type="Xs-Library"        perturbable="False"                              >Xs-Library.xml</Input>
    <Input name="FissionYield.dat"    type="FissionYield"      perturbable="True"  subDirectory="library_fiss"  >FissionYield.dat</Input>
    <Input name="FissQValue.dat"      type="FissQValue"        perturbable="True"  subDirectory="library_fiss"  >FissQValue.dat</Input>
    <Input name="AlphaDecay.path"     type="AlphaDecay"        perturbable="True"  subDirectory="path"          >AlphaDecay.path</Input>
    <Input name="Beta+Decay.path"     type="Beta+Decay"        perturbable="True"  subDirectory="path"          >Beta+Decay.path</Input>
    <Input name="Beta+xDecay.path"    type="Beta+xDecay"       perturbable="True"  subDirectory="path"          >Beta+xDecay.path</Input>
    <Input name="BetaDecay.path"      type="BetaDecay"         perturbable="True"  subDirectory="path"          >BetaDecay.path</Input>
    <Input name="BetaxDecay.path"     type="BetaxDecay"        perturbable="True"  subDirectory="path"          >BetaxDecay.path</Input>
    <Input name="IntTraDecay.path"    type="IntTraDecay"       perturbable="True"  subDirectory="path"          >IntTraDecay.path</Input>
    <Input name="ISOTXS000007"        type="isoXS"             perturbable="False"                              >ISOTXS000007</Input>
    <Input name="XS.xml"              type="XS"                perturbable="True"                               >XS.xml</Input>
    <Input name="N,2N.path"           type="N,2N"              perturbable="False" subDirectory="path"          >N,2N.path</Input>
    <Input name="N,ALPHA.path"        type="N,ALPHA"           perturbable="False" subDirectory="path"          >N,ALPHA.path</Input>
    <Input name="N,G.path"            type="N,G"               perturbable="False" subDirectory="path"          >N,G.path</Input>
    <Input name="N,Gx.path"           type="N,Gx"              perturbable="False" subDirectory="path"          >N,Gx.path</Input>
    <Input name="N,P.path"            type="N,P"               perturbable="False" subDirectory="path"          >N,P.path</Input>  
    <Input name="budep.inp"           type="budep"             perturbable="False" subDirectory="library_fiss"  >budep.inp</Input>
    <Input name="CRAM_coeff_PF.dat"   type="CRAM_coeff_PF"     perturbable="False" subDirectory="library_fiss"  >CRAM_coeff_PF.dat</Input>
    <Input name="FissQValues.dat"     type="FissQValues"       perturbable="False" subDirectory="library_fiss"  >FissQValues.dat</Input>
    <Input name="IsotopeList.dat"     type="IsotopeList"       perturbable="False" subDirectory="input_dpl"     >IsotopeList.dat</Input>
    <Input name="mass.inp"            type="mass"              perturbable="False" subDirectory="input_dpl"     >mass.inp</Input>
  </Files>

  <Models>
    <Code name="PHISICS" subType="Phisics">
       <executable>/home/rouxpn/PHISICS/PHISICS-nov17_3/projects/bin/dpl_instant_run</executable> 
       <PerturbXS>additive</PerturbXS>  
       <tabulation>F</tabulation> 
       <mrtauStandAlone>F</mrtauStandAlone>
        <mrtauStandAloneExecutable>/home/rouxpn/PHISICS/PHISICS-nov17_3/projects/bin/mrtau_standalone</mrtauStandAloneExecutable>
    </Code>
  </Models>

  <Distributions>
    <Normal name="DECAY|BETA|U235_distrib">
      <mean>44.5</mean>
      <sigma>0.5</sigma>
      <upperBound>40</upperBound>
      <lowerBound>49</lowerBound>
    </Normal>
    <Normal name="FY|FAST|U235|ZN67_distrib">
      <mean>5.7775</mean>
      <sigma>0.5</sigma>
      <upperBound>6.0</upperBound>
      <lowerBound>5.0</lowerBound>
    </Normal>
    <Normal name="DENSITY|FUEL1|U235_distrib">
      <mean>100</mean>
      <sigma>1</sigma>
      <upperBound>102</upperBound>
      <lowerBound>98</lowerBound>
    </Normal>
    <Normal name="DENSITY|FUEL1|U238_distrib">
      <mean>0.02</mean>
      <sigma>0.001</sigma>
      <upperBound>0.015</upperBound>
      <lowerBound>0.025</lowerBound>
    </Normal>
    <Normal name="DENSITY|FUEL3|XE135_distrib">
      <mean>10000</mean>
      <sigma>100</sigma>
      <upperBound>10000</upperBound>
      <lowerBound>9900</lowerBound>
    </Normal>
    <Normal name="QVALUES|B10_distrib">
      <mean>0.02</mean>
      <sigma>0.001</sigma>
      <upperBound>0.015</upperBound>
      <lowerBound>0.025</lowerBound>
    </Normal>
    <Normal name="ALPHADECAY|U234_distrib">
      <mean>0.02</mean>
      <sigma>0.001</sigma>
      <upperBound>0.015</upperBound>
      <lowerBound>0.025</lowerBound>
    </Normal>
    <Normal name="BETA+DECAY|NB93_distrib">
      <mean>0.02</mean>
      <sigma>0.001</sigma>
      <upperBound>0.015</upperBound>
      <lowerBound>0.025</lowerBound>
    </Normal>
    <Normal name="BETA+XDECAY|U234_distrib">
      <mean>0.02</mean>
      <sigma>0.001</sigma>
      <upperBound>0.015</upperBound>
      <lowerBound>0.025</lowerBound>
    </Normal>
    <Normal name="BETADECAY|MO95_distrib">
      <mean>0.02</mean>
      <sigma>0.001</sigma>
      <upperBound>0.015</upperBound>
      <lowerBound>0.025</lowerBound>
    </Normal>
    <Normal name="BETAXDECAY|U234_distrib">
      <mean>0.02</mean>
      <sigma>0.001</sigma>
      <upperBound>0.015</upperBound>
      <lowerBound>0.025</lowerBound>
    </Normal>
    <Normal name="INTTRADECAY|U234_distrib">
      <mean>0.02</mean>
      <sigma>0.001</sigma>
      <upperBound>0.015</upperBound>
      <lowerBound>0.025</lowerBound>
    </Normal>
    <Normal name="XS|1|FUEL1|U235|MULTIPLIER|FISSIONXS|1_distrib">
      <mean>0.02</mean>
      <sigma>0.001</sigma>
      <upperBound>0.015</upperBound>
      <lowerBound>0.025</lowerBound>
    </Normal>
    <Normal name="XS|2|FUEL3|U238|ABSOLUTE|FISSIONXS|1_distrib">
      <mean>0.02</mean>
      <sigma>0.001</sigma>
      <upperBound>0.015</upperBound>
      <lowerBound>0.025</lowerBound>
    </Normal>
    <Normal name="XS|1|FUEL1|XE135|ABSOLUTE|NPXS|5_distrib">
      <mean>55555.555</mean>
      <sigma>5</sigma>
      <upperBound>55560</upperBound>
      <lowerBound>55550</lowerBound>
    </Normal>
    <Normal name="XS|1|FUEL1|XE135|ABSOLUTE|NPXS|8_distrib">
      <mean>888.88</mean>
      <sigma>8</sigma>
      <upperBound>896</upperBound>
      <lowerBound>880</lowerBound>
    </Normal>
    <Normal name="XS|1|FUEL1|XE135|ABSOLUTE|NPXS|3_distrib">
      <mean>333.333</mean>
      <sigma>3</sigma>
      <upperBound>336</upperBound>
      <lowerBound>330</lowerBound>
    </Normal>
    <Normal name="XS|1|FUEL1|XE135|ABSOLUTE|NPXS|12_distrib">
      <mean>121212</mean>
      <sigma>12</sigma>
      <upperBound>121224</upperBound>
      <lowerBound>121200</lowerBound>
    </Normal>
    <Normal name="XS|1|FUEL1|XE135|ABSOLUTE|NPXS|7_distrib">
      <mean>7777.777</mean>
      <sigma>77</sigma>
      <upperBound>7854</upperBound>
      <lowerBound>7700</lowerBound>
    </Normal>
  </Distributions>

  <Samplers>
    <MonteCarlo name="MC_samp">
      <samplerInit>
        <limit>2</limit>
      </samplerInit>
      <variable name="DECAY|BETA|U235">
        <distribution>DECAY|BETA|U235_distrib</distribution>
      </variable>
      <variable name="FY|FAST|U235|ZN67">
        <distribution>FY|FAST|U235|ZN67_distrib</distribution>
      </variable>
      <variable name="DENSITY|FUEL1|U235">
        <distribution>DENSITY|FUEL1|U235_distrib</distribution>
      </variable>
      <variable name="DENSITY|FUEL1|U238">
        <distribution>DENSITY|FUEL1|U238_distrib</distribution>
      </variable>
      <variable name="DENSITY|FUEL3|XE135">
        <distribution>DENSITY|FUEL1|U238_distrib</distribution>
      </variable>
      <variable name="QVALUES|B10">
        <distribution>QVALUES|B10_distrib</distribution>
      </variable>
      <variable name="ALPHADECAY|U234">
        <distribution>ALPHADECAY|U234_distrib</distribution>
      </variable>
      <variable name="BETA+DECAY|NB93">
        <distribution>BETA+DECAY|NB93_distrib</distribution>
      </variable>
      <variable name="BETA+XDECAY|U234">
        <distribution>BETA+XDECAY|U234_distrib</distribution>
      </variable>
      <variable name="BETADECAY|MO95">
        <distribution>BETADECAY|MO95_distrib</distribution>
      </variable>
      <variable name="BETAXDECAY|U234">
        <distribution>BETAXDECAY|U234_distrib</distribution>
      </variable>
      <variable name="INTTRADECAY|U234">
        <distribution>INTTRADECAY|U234_distrib</distribution>
      </variable>
      <variable name="XS|1|FUEL1|U235|MULTIPLIER|FISSIONXS|1">
        <distribution>XS|1|FUEL1|U235|MULTIPLIER|FISSIONXS|1_distrib</distribution>
      </variable>
      <variable name="XS|2|FUEL3|U238|ABSOLUTE|FISSIONXS|1">
        <distribution>XS|2|FUEL3|U238|ABSOLUTE|FISSIONXS|1_distrib</distribution>
      </variable>
      <variable name="XS|1|FUEL1|XE135|ABSOLUTE|NPXS|5">
        <distribution>XS|1|FUEL1|XE135|ABSOLUTE|NPXS|5_distrib</distribution>
      </variable>
      <variable name="XS|1|FUEL1|XE135|ABSOLUTE|NPXS|8">
        <distribution>XS|1|FUEL1|XE135|ABSOLUTE|NPXS|8_distrib</distribution>
      </variable>
      <variable name="XS|1|FUEL1|XE135|ABSOLUTE|NPXS|3">
        <distribution>XS|1|FUEL1|XE135|ABSOLUTE|NPXS|3_distrib</distribution>
      </variable>
      <variable name="XS|1|FUEL1|XE135|ABSOLUTE|NPXS|12">
        <distribution>XS|1|FUEL1|XE135|ABSOLUTE|NPXS|12_distrib</distribution>
      </variable>
      <variable name="XS|1|FUEL1|XE135|ABSOLUTE|NPXS|7">
        <distribution>XS|1|FUEL1|XE135|ABSOLUTE|NPXS|7_distrib</distribution>
      </variable>
    </MonteCarlo>
  </Samplers>

  <Steps>
    <MultiRun name="testDummyStep">
      <Input class="Files" type="decay"             >decay.dat</Input>
      <Input class="Files" type="inp"               >inp.xml</Input>
      <Input class="Files" type="path"              >lib_inp_path.xml</Input>
      <Input class="Files" type="Material"          >Material.xml</Input>
      <Input class="Files" type="Depletion_input"   >Depletion_input.xml</Input>
      <Input class="Files" type="Xs-Library"        >Xs-Library.xml</Input>
      <Input class="Files" type="FissionYield"      >FissionYield.dat</Input>
      <Input class="Files" type="FissQValue"        >FissQValue.dat</Input>
      <Input class="Files" type="AlphaDecay"        >AlphaDecay.path</Input>
      <Input class="Files" type="Beta+Decay"        >Beta+Decay.path</Input>
      <Input class="Files" type="Beta+xDecay"       >Beta+xDecay.path</Input>
      <Input class="Files" type="BetaDecay"         >BetaDecay.path</Input>
      <Input class="Files" type="BetaxDecay"        >BetaxDecay.path</Input>
      <Input class="Files" type="IntTraDecay"       >IntTraDecay.path</Input>
      <Input class="Files" type="ISOTXS000007"      >ISOTXS000007</Input>
      <Input class="Files" type="XS"                >XS.xml</Input>   
      <Input class="Files" type="N,2N"              >N,2N.path</Input>  
      <Input class="Files" type="N,ALPHA"           >N,ALPHA.path</Input>
      <Input class="Files" type="N,G"               >N,G.path</Input>
      <Input class="Files" type="N,Gx"              >N,Gx.path</Input>
      <Input class="Files" type="N,P"               >N,P.path</Input> 
      <Input class="Files" type="budep"             >budep.inp</Input>   
      <Input class="Files" type="CRAM_coeff_PF"     >CRAM_coeff_PF.dat</Input> 
      <Input class="Files" type="FissQValues"       >FissQValues.dat</Input>
      <Input class="Files" type="IsotopeList"       >IsotopeList.dat</Input> 
      <Input class="Files" type="mass"              >mass.inp</Input> 
          
      <Model class="Models" type="Code">PHISICS</Model>
      <Sampler class="Samplers" type="MonteCarlo">MC_samp</Sampler>
      <Output class="Databases" type="HDF5">DataB_REL5_1</Output>
    </MultiRun>
    <IOStep name="extract_data">
        <Input  class="Databases" type="HDF5">DataB_REL5_1</Input>
        <Output class="DataObjects" type="PointSet">outputPointSet</Output>
        <Output class="OutStreams" type="Print">outputPointSetDum</Output>
    </IOStep>
  </Steps>
  <OutStreams>
    <Print name="outputPointSetDum">
      <type>csv</type>
      <source>outputPointSet</source>
    </Print>
  </OutStreams>



<DataObjects>
    <PointSet name="outputPointSet">
      <Input>DECAY|BETA|U235,FY|FAST|U235|ZN67,DENSITY|FUEL1|U235,DENSITY|FUEL1|U238,DENSITY|FUEL3|XE135,BETADECAY|MO95,QVALUES|B10, ALPHADECAY|U234, BETA+DECAY|NB93, BETA+XDECAY|U234, BETAXDECAY|U234, INTTRADECAY|U234, XS|1|FUEL1|U235|MULTIPLIER|FISSIONXS|1, XS|2|FUEL3|U238|ABSOLUTE|FISSIONXS|1, XS|1|FUEL1|XE135|ABSOLUTE|NPXS|5, XS|1|FUEL1|XE135|ABSOLUTE|NPXS|8, XS|1|FUEL1|XE135|ABSOLUTE|NPXS|3, XS|1|FUEL1|XE135|ABSOLUTE|NPXS|12, XS|1|FUEL1|XE135|ABSOLUTE|NPXS|7</Input>
      <Output>keff</Output>
    </PointSet>
</DataObjects>

  <Databases>
    <HDF5 name="DataB_REL5_1" readMode="overwrite"/>
  </Databases>

</Simulation>
