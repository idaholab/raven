<?xml version="1.0" ?>
<Simulation verbosity="silent">
  <RunInfo>
    <WorkingDir>economicRatioTimeDependent</WorkingDir>
    <Sequence>FirstMRun,timeDepEconomicRatioPP</Sequence>
    <batchSize>1</batchSize>
  </RunInfo>
  <TestInfo>
    <name>framework/PostProcessors/EconomicRatio/timeDependent</name>
    <author>dgarrett622</author>
    <created>2022-02-08</created>
    <classesTested>PostProcessors.EconomicRatio</classesTested>
    <description>
      This tests time-dependent economic ratio quantities and passing through basic statistics.
    </description>
    <revisions>
    </revisions>
  </TestInfo>
  <Files>
      <Input name="economicRatioExternalModelTest.py" type="">economicRatioExternalModelTest.py</Input>
      <Input name="samples.csv" type="">samples.csv</Input>
  </Files>
  <Models>
    <ExternalModel ModuleToLoad="economicRatioExternalModelTest" name="PythonModule" subType="">
      <variables>x,y,z,time,x0,x01,x02,y0,y02,y01,z0,z02,z01</variables>
    </ExternalModel>
    <PostProcessor name="timeDepEconomicRatio" subType="EconomicRatio" verbosity="silent">
      <pivotParameter>time</pivotParameter>
      <valueAtRisk prefix="VaR" threshold="0.05">x0,y0,z0,x,y,z</valueAtRisk>
      <expectedShortfall prefix="es" threshold="0.05">x0,y0,z0,x,y,z</expectedShortfall>
      <sharpeRatio prefix="sharpe">x0,y0,z0,x,y,z</sharpeRatio>
      <sortinoRatio prefix="sort" threshold="median">x0,y0,z0,x,y,z</sortinoRatio>
      <gainLossRatio prefix="glr" threshold="median">x0,y0,z0,x,y,z</gainLossRatio>
      <variance prefix="var">x0,y0,z0,x,y,z</variance>
      <covariance prefix="cov">
        <targets>x0,y0,z0,x,y,z</targets>
        <features>x0,y0,z0,x,y,z</features>
      </covariance>
      <pearson prefix="pearson">
        <targets>x0,y0,z0,x,y,z</targets>
        <features>x0,y0,z0,x,y,z</features>
      </pearson>
      <expectedValue prefix="mean">x0,y0,z0,x,y,z</expectedValue>
      <sigma prefix="sigma">x0,y0,z0,x,y,z</sigma>
      <variationCoefficient prefix="vc">x0,y0,z0,x,y,z</variationCoefficient>
      <skewness prefix="skew">x0,y0,z0,x,y,z</skewness>
      <kurtosis prefix="kurt">x0,y0,z0,x,y,z</kurtosis>
      <median prefix="median">x0,y0,z0,x,y,z</median>
      <percentile prefix="percentile">x0,y0,z0,x,y,z</percentile>
      <samples prefix="samp">x0,y0,z0,x,y,z</samples>
    </PostProcessor>
  </Models>

  <Samplers>
    <CustomSampler name="customSamplerFile">
      <Source class="Files" type="">samples.csv</Source>
      <variable name="x0"/>
      <variable name="y0"/>
      <variable name="z0"/>
    </CustomSampler>
  </Samplers>

  <Steps>
    <MultiRun name="FirstMRun">
      <Input class="Files" type="">economicRatioExternalModelTest.py</Input>
      <Model class="Models" type="ExternalModel">PythonModule</Model>
      <Sampler class="Samplers" type="CustomSampler">customSamplerFile</Sampler>
      <Output class="DataObjects" type="HistorySet">HistorySetPostProcTest</Output>
    </MultiRun>
    <PostProcess name="timeDepEconomicRatioPP">
      <Input class="DataObjects" type="HistorySet">HistorySetPostProcTest</Input>
      <Model class="Models" type="PostProcessor">timeDepEconomicRatio</Model>
      <Output class="DataObjects" type="HistorySet">economicRatioHistory</Output>
      <Output class="OutStreams" type="Print">HistorySetPostProcTest_dump</Output>
    </PostProcess>
  </Steps>

  <OutStreams>
    <Print name="HistorySetPostProcTest_dump">
      <type>csv</type>
      <source>economicRatioHistory</source>
      <what>input,output</what>
    </Print>
  </OutStreams>

  <DataObjects>
    <HistorySet name="HistorySetPostProcTest">
      <Input>x0,y0,z0</Input>
      <Output>time,x,y,z</Output>
    </HistorySet>
    <HistorySet name="economicRatioHistory">
        <Output>
            VaR_0.05_x0,VaR_0.05_y0,VaR_0.05_z0,VaR_0.05_x,VaR_0.05_y,VaR_0.05_z,
            VaR_0.05_ste_x0,VaR_0.05_ste_y0,VaR_0.05_ste_z0,VaR_0.05_ste_x,VaR_0.05_ste_y,VaR_0.05_ste_z,
            es_0.05_x0,es_0.05_y0,es_0.05_z0,es_0.05_x,es_0.05_y,es_0.05_z,
            sharpe_x0,sharpe_y0,sharpe_z0,sharpe_x,sharpe_y,sharpe_z,
            sort_median_x0,sort_median_y0,sort_median_z0,sort_median_x,sort_median_y,sort_median_z,
            glr_median_x0,glr_median_y0,glr_median_z0,glr_median_x,glr_median_y,glr_median_z,
            var_x0,var_y0,var_z0,var_x,var_y,var_z,
            mean_x0, mean_y0, mean_z0, mean_x, mean_y, mean_z,
            sigma_x0, sigma_y0, sigma_z0, sigma_x, sigma_y, sigma_z,
            vc_x0, vc_y0, vc_z0, vc_x, vc_y, vc_z,
            skew_x0, skew_y0, skew_z0, skew_x, skew_y, skew_z,
            kurt_x0, kurt_y0, kurt_z0, kurt_x, kurt_y, kurt_z,
            median_x0, median_y0, median_z0, median_x, median_y, median_z,
            samp_x0, samp_y0, samp_z0, samp_x, samp_y, samp_z,
            percentile_5_x0, percentile_5_y0, percentile_5_z0, percentile_5_x, percentile_5_y, percentile_5_z,
            percentile_95_x0, percentile_95_y0, percentile_95_z0, percentile_95_x, percentile_95_y, percentile_95_z,
            cov_x0_x0, cov_y0_x0, cov_z0_x0, cov_x_x0, cov_y_x0, cov_z_x0,
            cov_x0_y0, cov_y0_y0, cov_z0_y0, cov_x_y0, cov_y_y0, cov_z_y0,
            cov_x0_z0, cov_y0_z0, cov_z0_z0, cov_x_z0, cov_y_z0, cov_z_z0,
            cov_x0_x, cov_y0_x, cov_z0_x, cov_x_x, cov_y_x, cov_z_x,
            cov_x0_y, cov_y0_y, cov_z0_y, cov_x_y, cov_y_y, cov_z_y,
            cov_x0_z, cov_y0_z, cov_z0_z, cov_x_z, cov_y_z, cov_z_z,
            pearson_x0_x0, pearson_y0_x0, pearson_z0_x0, pearson_x_x0, pearson_y_x0, pearson_z_x0,
            pearson_x0_y0, pearson_y0_y0, pearson_z0_y0, pearson_x_y0, pearson_y_y0, pearson_z_y0,
            pearson_x0_z0, pearson_y0_z0, pearson_z0_z0, pearson_x_z0, pearson_y_z0, pearson_z_z0,
            pearson_x0_x, pearson_y0_x, pearson_z0_x, pearson_x_x, pearson_y_x, pearson_z_x,
            pearson_x0_y, pearson_y0_y, pearson_z0_y, pearson_x_y, pearson_y_y, pearson_z_y,
            pearson_x0_z, pearson_y0_z, pearson_z0_z, pearson_x_z, pearson_y_z, pearson_z_z
        </Output>
        <options>
            <pivotParameter>time</pivotParameter>
        </options>
    </HistorySet>
  </DataObjects>

</Simulation>
