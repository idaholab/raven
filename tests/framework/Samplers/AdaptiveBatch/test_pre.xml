<?xml version="1.0" ?>
<Simulation verbosity="debug">

  <TestInfo>
    <name>framework/Samplers/AdaptiveBatch.PreRankingSimplification</name>
    <author>maljdan</author>
    <created>2015-11-03</created>
    <classesTested>Samplers.LimitSurfaceSearch</classesTested>
    <description>
       A copy of framework/Samplers/AdaptiveBatch.MaxPDistance (test_maxp_d.xml)
       except it has been modified to provide a simplification value which is
       used to set a level for persistence simplification before extracting
       local maximum from either the maxP or maxV batch strategies. In this
       example, the value is 0.5, so any persistence value less than 0.5 of the
       scoring function's range of values is removed and thus we may end up with
       very few local maxima candidates.

       Note, all of the tests in AdaptiveBatch operate on a 2D input domain with
       the goal of extracting a circular limit surface with radius 0.5 and
       centered at the origin, (0,0).
    </description>
    <revisions>
      <revision author="maljdan" date="2015-11-20">Collapsing the batch sampling into the limit surface class, updating documentation, XSD, and the test cases to reflect this change.</revision>
      <revision author="talbpaul" date="2016-02-08">First update, looking for more failing tests to add.</revision>
      <revision author="maljdan" date="2016-04-06">Updating test cases to reflect the changes to the user input.</revision>
      <revision author="maljdan" date="2017-01-18">Adding test description.</revision>
      <revision author="maljdan" date="2017-09-20">Simplifying test case to use a linear limit surface with a linear kernel svm and abstracting common components of test cases</revision>
    </revisions>
  </TestInfo>

  <ExternalXML node="RunInfo" xmlToLoad="shared_run_info.xml"/>
  <ExternalXML node="Steps" xmlToLoad="shared_steps.xml"/>
  <ExternalXML node="DataObjects" xmlToLoad="shared_data_objects.xml"/>
  <ExternalXML node="Distributions" xmlToLoad="shared_distributions.xml"/>

  <Samplers>
    <ExternalXML node="MonteCarlo" xmlToLoad="shared_initial_sampler.xml"/>
    <LimitSurfaceSearch name="adaptiveSearch">
      <ROM class="Models" type="ROM">mySVM</ROM>
      <Function class="Functions" type="External">label</Function>
      <TargetEvaluation class="DataObjects" type="PointSet">response</TargetEvaluation>
      <ExternalXML node="Convergence" xmlToLoad="shared_convergence.xml"/>
      <!--
        <generateCSVs/>
      -->
      <scoring>distance</scoring>
      <batchStrategy>maxP</batchStrategy>
      <simplification>0.5</simplification>
      <thickness>1</thickness>
      <maxBatchSize>4</maxBatchSize>
      <variable name="x1">
        <distribution>uniform</distribution>
      </variable>
      <variable name="x2">
        <distribution>uniform</distribution>
      </variable>
    </LimitSurfaceSearch>
  </Samplers>

  <ExternalXML node="Models" xmlToLoad="shared_models.xml"/>
  <ExternalXML node="Functions" xmlToLoad="shared_functions.xml"/>

  <OutStreams>
    <Print name="outfile_limit">
      <filename>pre_ls</filename>
      <what>Input|x1,Input|x2</what>
      <type>csv</type>
      <source>limit_surface</source>
    </Print>
    <Print name="outfile_samples">
      <filename>pre_samples</filename>
      <type>csv</type>
      <source>response</source>
    </Print>
  </OutStreams>

</Simulation>
